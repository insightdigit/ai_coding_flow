# Feature Specification: 配方管理介面

**Feature Branch**: `001-recipe-management-ui`
**Created**: 2025-11-06
**Updated**: 2025-11-10 (客戶會議需求更新)
**Status**: Draft
**Input**: User description: "配方管理介面：建立、編輯、查詢配方的使用者介面，支援版本管理和多條件篩選"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 建立新配方 (Priority: P1)

研發人員需要建立新產品配方時，能夠在配方建立表單中輸入完整的配方資訊，包含名稱、日期、版本號、來源配方編號、目的、條件、包裝方式、照片、項目（名稱/百分比/克數）、注意事項、泡豆方式、洗豆水量、每包投料量、乾濕重量、膨脹率等欄位，並儲存配方。配方建立者可從下拉選單選擇，預設為登入使用者。

**Why this priority**: 這是配方管理的核心功能，沒有建立配方的能力，整個系統就無法運作。這是 MVP 的基礎。

**Independent Test**: 研發人員可以登入系統，填寫完整的配方表單（所有必填和選填欄位），上傳照片（可選擇開啟相機或相簿），輸入必要資訊後儲存，系統顯示儲存成功訊息。可以在配方列表中看到剛建立的配方。

**Acceptance Scenarios**:

1. **Given** 研發人員已登入系統，**When** 點擊「建立新配方」按鈕，**Then** 系統顯示配方建立表單，配方建立者預設為當前登入使用者，可透過下拉選單修改
2. **Given** 研發人員在配方表單中上傳照片，**When** 點擊上傳按鈕，**Then** 系統彈出選擇視窗，提供「開啟相機」和「開啟相簿」兩個選項（iOS 和 Android 均支援）
3. **Given** 研發人員選擇「開啟相機」選項，**When** 拍照完成，**Then** 系統允許使用者為照片命名並顯示預覽
4. **Given** 研發人員在配方項目中輸入克數和百分比，**When** 輸入數值，**Then** 克數和百分比顯示小數點後 10 位，PH 值小數點後 2 位, Brix 糖度小數點後 1 位
5. **Given** 研發人員輸入豆類的乾重量和濕重量，**When** 輸入完成，**Then** 系統自動計算膨脹率（濕豆總重/乾豆總重*100）
6. **Given** 研發人員選擇投料階段（一段式兩階投料 or 二段式三階投料），**When** 選擇完成，**Then** 系統根據選擇調整配方項目的輸入欄位
7. **Given** 研發人員設定總目標克數，**When** 輸入各原料百分比，**Then** 系統自動回算每個原料應使用的克數，確保總和等於總目標克數
8. **Given** 研發人員在配方表單中填寫完整資訊並上傳照片，**When** 點擊「儲存版本」按鈕，**Then** 系統驗證資料完整性，儲存配方並顯示成功訊息
9. **Given** 研發人員在配方表單中填寫不完整資訊（缺少必填欄位），**When** 點擊「儲存版本」按鈕，**Then** 系統標示必填欄位錯誤，阻止儲存並提示使用者補充資訊
10. **Given** 配方已成功儲存，**When** 研發人員查看配方列表，**Then** 系統顯示剛建立的配方

---

### User Story 2 - 編製新版本配方（快速建立功能） (Priority: P2)

研發人員需要根據現有配方建立新版本時，能夠選擇「編製新配方」或「快速複製」功能，系統自動複製選定版本內容並歸檔舊版本，研發人員在此基礎上修改後提交。版本號遵循 v1/v2/v3 規則，刪除舊版本不影響現有版本編號。

**Why this priority**: 版本管理是配方管理的重要功能，能大幅提升研發效率並確保歷史追蹤。在基本建立功能完成後，這是最有價值的增強功能。

**Independent Test**: 研發人員可以在現有配方詳情頁面點擊「編製新版本」或「快速複製此版本」，系統自動填入選定版本資訊並分配新版本號（例如從 v2 → v3），研發人員修改後提交，新版本建立成功且舊版本自動歸檔。即使刪除 v1，v2 仍保持為 v2。

**Acceptance Scenarios**:

1. **Given** 研發人員正在查看某個配方（例如版本 v2）的詳情頁面，**When** 點擊「編製新版本」按鈕，**Then** 系統開啟新配方表單並自動填入目前版本的所有資訊，版本號自動遞增為 v3
2. **Given** 研發人員正在查看版本歷史頁面，**When** 點擊某版本（例如 v1）的「快速複製」按鈕，**Then** 系統複製該版本所有資料並建立新版本（例如 v4），允許使用者修改後儲存
3. **Given** 研發人員在複製的表單中修改部分內容（例如更新泡豆方式或項目比例），**When** 點擊「儲存版本」，**Then** 系統建立新版本配方（v3），舊版本（v2）自動標記為「已歸檔」狀態
4. **Given** 配方有版本 v1, v2, v3，使用者刪除 v1，**When** 查看版本列表，**Then** v2 和 v3 的版本號保持不變，不會重新編號為 v1 和 v2
5. **Given** 新版本配方已建立，**When** 研發人員查看該配方的版本歷史，**Then** 系統顯示所有版本列表（包含已刪除版本的編號空缺），包含版本號、建立日期、建立人、狀態等資訊
6. **Given** 研發人員查看版本歷史，**When** 點擊任一歷史版本（例如 v1），**Then** 系統顯示該版本的完整資訊（唯讀模式）

---

### User Story 3 - 多條件查詢與篩選配方 (Priority: P3)

研發人員需要快速找到特定配方時，能夠使用多個條件篩選（配方名稱、版本號、日期範圍、配方建立者等），系統即時顯示符合條件的配方列表。介面支援電腦、平板、手機三種裝置。

**Why this priority**: 查詢功能提升使用者體驗，但在配方數量較少時，基本的列表瀏覽也能滿足需求。這是優化功能而非核心功能。

**Independent Test**: 使用者可以在配方列表頁面輸入篩選條件（例如：配方名稱包含「紅豆」、日期範圍為最近三個月、配方建立者為「張三」），點擊「查詢」後看到符合條件的配方列表。手機版顯示簡化的卡片式佈局。

**Acceptance Scenarios**:

1. **Given** 使用者在配方列表頁面，**When** 在篩選區塊輸入配方名稱關鍵字（例如「布朗尼」），**Then** 系統即時顯示名稱包含該關鍵字的配方
2. **Given** 使用者選擇配方建立者篩選條件（從下拉選單選擇），**When** 點擊「查詢」按鈕，**Then** 系統顯示該配方建立者建立的所有配方
3. **Given** 使用者使用手機訪問配方列表，**When** 查看列表，**Then** 系統顯示適合手機的卡片式佈局，主要資訊一目了然
4. **Given** 使用者選擇日期範圍（2025-01-01 到 2025-03-31）篩選條件，**When** 點擊「查詢」，**Then** 系統顯示符合條件的配方列表
5. **Given** 使用者已套用篩選條件，**When** 點擊「清除篩選」按鈕，**Then** 系統重置所有篩選條件並顯示完整配方列表

---

### User Story 4 - 使用配方模板和臨時表格 (Priority: P3)

研發人員需要建立複雜配方時，能夠使用「配方單管理」模板或「臨時表格」快速帶入原料資訊，也可以手動輸入。臨時表格可記錄子配方（如「奶茶」、「鋪醬配」）的原料組成，供後續配方使用。配方項目表格支援展開/收縮功能。

**Why this priority**: 模板和臨時表格功能能大幅提升複雜配方的建立效率，但這是進階功能，在基本功能完成後實作。

**Independent Test**: 研發人員在建立配方時，可以選擇從「配方單管理」模板帶入資料，或從「臨時表格」選擇子配方（如「奶茶」），系統自動填入該模板/子配方的所有原料資訊。也可以手動輸入原料。配方項目表格可以展開/收縮。

**Acceptance Scenarios**:

1. **Given** 研發人員在配方項目區塊，**When** 點擊「從配方單管理帶入」按鈕並選擇模板，**Then** 系統自動填入該模板的所有原料資訊到配方項目
2. **Given** 研發人員需要使用子配方，**When** 點擊「從臨時表格選擇」並選擇「奶茶」，**Then** 系統自動填入奶茶的原料組成
3. **Given** 研發人員想要建立新的子配方，**When** 在臨時表格中輸入「奶茶」的原料（紅茶、牛奶、糖），**Then** 系統儲存該臨時表格，供後續配方使用
4. **Given** 研發人員查看包含多個項目的配方，**When** 點擊「收縮」按鈕，**Then** 系統隱藏配方項目表格，節省畫面空間
5. **Given** 配方項目表格已收縮，**When** 點擊「展開」按鈕，**Then** 系統重新顯示完整的配方項目表格

---

### User Story 5 - 管理配方建立者 (Priority: P3)

系統管理員需要管理配方建立者名單時，能夠進入「配方建立者管理」介面，新增、編輯、刪除配方建立者資訊。

**Why this priority**: 配方建立者管理是支援性功能，確保配方建立者下拉選單的資料來源正確，但不影響核心配方管理流程。

**Independent Test**: 系統管理員可以訪問「配方建立者管理」頁面，查看所有配方建立者列表，新增新的配方建立者，編輯現有配方建立者的資訊，或刪除不再使用的配方建立者。

**Acceptance Scenarios**:

1. **Given** 系統管理員已登入，**When** 進入「配方建立者管理」頁面，**Then** 系統顯示所有配方建立者列表（姓名、部門、狀態等）
2. **Given** 系統管理員點擊「新增配方建立者」按鈕，**When** 填寫姓名、部門等資訊並提交，**Then** 系統新增該配方建立者，可在配方建立表單的下拉選單中選擇
3. **Given** 系統管理員點擊某個配方建立者的「編輯」按鈕，**When** 修改資訊並儲存，**Then** 系統更新該配方建立者的資訊
4. **Given** 系統管理員點擊某個配方建立者的「刪除」按鈕，**When** 確認刪除，**Then** 系統刪除該配方建立者（若該配方建立者已被配方使用，則顯示警告訊息）

---

### Edge Cases

- 當研發人員建立配方但網路連線中斷時，系統如何處理？是否需要暫存草稿功能？
- 當照片檔案過大（超過 5MB）或格式不支援時，系統如何提示？
- 當使用者在手機拍照時權限被拒絕（相機或相簿權限），系統如何提示？
- 當使用者篩選條件過於複雜導致無結果時，系統如何提示？
- 當研發人員編輯配方時，另一位研發人員同時編輯同一配方，如何處理並發衝突？
- 配方歷史版本的保存期限是否有限制？如何處理超過保存期限的舊版本？
- 當版本號達到 v999 時，如何處理版本號溢位問題？
- 當總成分表計算時，原料的成分資訊不完整（缺少糖或水含量），系統如何處理？
- 當產品規格表中料號資訊缺失或重複時，系統如何處理加總邏輯？
- 當臨時表格中的子配方被配方使用後，該子配方被修改或刪除，對使用它的配方有何影響？
- 當使用者設定總目標克數後，原料百分比總和不等於 100%，系統如何回算克數？

## Requirements *(mandatory)*

### Functional Requirements

#### 配方建立與編輯 - 資料結構

系統採用**配方主檔 + 版本管理**的二層式架構：
- **配方主檔 (Recipe)**：包含配方的基本識別資訊（名稱、說明、主圖、配方建立者）
- **版本 (Version)**：每個配方可有多個版本，每個版本包含完整的配方內容

#### 配方建立與編輯 - 表單欄位

- **FR-001**: 系統必須提供配方建立表單，採用二層式結構：

  **【配方主檔資訊】**
  - ✅ **配方名稱**（必填，文字輸入，最多 100 字元，例如：紅豆湯、糙米粥）
  - ✅ **客戶名稱**（選填，文字輸入，最多 100 字元，記錄客戶或專案名稱）
  - ✅ **配方說明**（選填，多行文字輸入，說明配方用途，最多 200 字元）
  - 🟡 **配方建立者**（必填，下拉選單，預設為當前登入使用者，可修改為其他配方建立者）— UI 已實作，後端邏輯待實作
  - ✅ **配方主圖照片**（選填，支援 JPG/PNG 格式，單張最大 5MB，用於快速識別）

  **【版本資訊】**
  - ✅ **版本名稱**（必填，文字輸入，格式：v1, v2, v3...，系統自動編號或手動輸入）
  - ✅ **版本標籤**（必填，文字輸入，最多 50 字元，例如：傳統版、低糖版、速煮版）
  - ✅ **客戶名稱**（選填，文字輸入，最多 100 字元，例如：ABC 食品公司、XYZ 餐飲集團）
  - ✅ **建立日期**（選填，日期選擇器，預設為今日）
  - ✅ **研發目的**（必填，多行文字輸入，說明此版本的研發目的，最多 200 字元）
  - ✅ **條件說明**（選填，多行文字輸入，記錄殺菌條件、客戶需求等，最多 200 字元）

  **【測量數據】**
  - ✅ **PH 值**（選填，數字輸入，支援小數點後 4 位，範圍 0-14，例如：6.5）
  - ✅ **Brix 糖度**（選填，數字輸入，支援小數點後 4 位，單位：°Bx，例如：15）
  - ✅ **樣品數**（選填，數字輸入）
  - ✅ **樣品單位**（選填，下拉選單：罐/杯/袋/碗）
  - ❌ **包裝方式**（選填，文字輸入，格式：產出:(紅豆湯 1 杯，綠豆湯 1 袋)，支援多種包裝單位）

  **【配方項目】**（必填，動態表格，至少一項項目）
  - ✅ **項目名稱**（文字輸入，例如：紅豆、糖、水）
  - ✅ **百分比 (%)**（數字輸入，支援小數點後 10 位，例如：45.5000000000%）
  - ✅ **克數 (g)**（數字輸入，支援小數點後 10 位，例如：225.5000000000g）
  - ❌ **料號**（文字輸入，用於產品規格表加總，例如：S001）
  - ❌ **投料階段**（下拉選單，選項：一段式兩階投料、二段式三階投料）
  - ❌ **總目標克數**（數字輸入，系統根據此值和百分比自動回算各原料克數）
  - ✅ 系統必須顯示百分比總和，建議為 100%
  - ❌ 系統必須提供展開/收縮功能，可隱藏表格內容

  **【穀物專用資訊】**（選填區塊，適用於穀物類產品）
  - ❌ **泡豆方式**（選填，多行文字輸入，純文字說明，例如：「冷藏浸泡 8 小時」）
  - ✅ **洗豆水量**（選填，數字輸入，支援小數點後 4 位，單位：ml，例如：500.0000）
  - ✅ **每包投料量**（選填，數字輸入，支援小數點後 4 位，單位：g，例如：1000.0000）
  - ❌ **乾豆總重**（選填，數字輸入，支援小數點後 4 位，單位：g，例如：1000.0000）
  - ❌ **濕豆總重**（選填，數字輸入，支援小數點後 4 位，單位：g，例如：2500.0000）
  - 🟡 **膨脹率**（自動計算，顯示小數點後 4 位，公式：濕豆總重/乾豆總重*100，例如：250.0000）— 有欄位但無自動計算

  **【配方來源】**（選填區塊，用於從模板或臨時表格帶入資料）
  - ❌ **從配方單管理帶入**（按鈕，點擊後彈出配方單管理模板選擇器，選擇後自動填入該模板的所有原料資訊）
  - ❌ **從臨時表格選擇**（按鈕，點擊後彈出臨時表格選擇器，選擇子配方後自動填入原料資訊）
  - ✅ **手動輸入**（預設模式，使用者直接在配方項目表格中輸入）

  **【總成分表】**（自動計算區塊，顯示所有原料的總成分含量）
  - ❌ 系統必須追蹤每個原料的成分組成（例如：椰果包含糖 X g、水 Y g）
  - ❌ 系統必須將所有原料的成分加總顯示（例如：總糖 = 直接添加的糖 + 椰果的糖 + ...）
  - ❌ 原料成分資訊由使用者在配方項目中手動輸入：
    - 每個配方項目新增「成分組成」欄位（選填）
    - 使用者可輸入該原料包含的成分（例如：椰果包含糖 20g、水 80g）
    - 系統根據所有項目的成分組成自動計算總成分表

  **【產品規格表】**（自動計算區塊，顯示相同料號的原料加總）
  - ❌ 系統必須根據料號加總克數（例如：料號 S001 的糖，無論來自哪個原料，都加總顯示）
  - ❌ 顯示格式：料號 | 原料名稱 | 總克數

  **【照片與備註】**
  - ✅ **上傳照片**（選填，支援 JPG/PNG 格式，單張最大 5MB，支援多張上傳）
    - 🟡 點擊上傳時，彈出選擇視窗：「開啟相機」或「開啟相簿」— UI 已實作，功能待實作
    - 🟡 支援 iOS 和 Android 裝置的相機和相簿存取 — 待測試
    - ❌ 每張照片可自行命名 — 待實作
    - 🟡 照片可刪除並重新上傳 — UI 已實作，功能待實作
  - ✅ **注意事項**（選填，多行文字輸入，記錄重要注意事項，最多 500 字元）

- 🟡 **FR-002**: 系統必須驗證所有必填欄位，未填寫時阻止提交並在欄位旁顯示紅色錯誤提示 — 表單元件已支援，待後端驗證實作

- ❌ **FR-003**: 系統必須在基於現有版本建立新版本時，自動填入該版本的所有資訊（研發目的、條件說明、測量數據、項目清單、穀物資訊、注意事項等）到表單中 — 後端邏輯待實作

- ✅ **FR-004**: 系統必須支援動態新增/刪除項目，每個項目包含：項目名稱（文字）、百分比（數字，小數點後 10 位）、克數（數字，小數點後 10 位）、料號（文字）

- 🟡 **FR-005**: 系統必須限制所有照片上傳格式為 JPG 或 PNG，檔案大小不超過 5MB，超過限制時顯示錯誤訊息 — 前端元件已支援，驗證邏輯待實作

- 🟡 **FR-006**: 系統必須提供照片上傳方式選擇： — UI 已實作，互動功能待實作
  - 🟡 點擊上傳按鈕時，彈出 Modal 或選擇視窗
  - 🟡 提供「開啟相機」和「開啟相簿」兩個選項
  - ❌ 支援 iOS（使用 `capture="environment"` 或 `capture="user"` HTML 屬性）和 Android（使用 `accept="image/*"` 和 `capture` 屬性）
  - ❌ 處理相機/相簿權限被拒絕的情況，顯示友善的錯誤訊息

- ❌ **FR-007**: 系統必須提供照片命名功能：
  - 上傳照片後，顯示輸入框讓使用者命名
  - 預設照片名稱為原始檔名
  - 照片名稱可修改

- 🟡 **FR-008**: 系統必須提供照片預覽和刪除功能： — UI 已實作，互動功能待實作
  - 🟡 上傳後立即顯示縮圖預覽
  - 🟡 每張照片提供「刪除」按鈕
  - 🟡 刪除後可重新上傳

- ✅ **FR-009**: 系統必須在「配方項目」動態表格中自動計算百分比總和，如總和不等於 100% 則顯示黃色警告提示（非阻擋提交）

- ❌ **FR-010**: 系統必須在「配方項目」中支援投料階段選擇：
  - 提供下拉選單：「一段式兩階投料」、「二段式三階投料」
  - 選擇不同投料階段後，配方項目表格採用分組顯示方式：
    - **一段式兩階投料**：表格分為「第一階段」和「第二階段」兩個區塊
    - **二段式三階投料**：表格分為「第一階段」、「第二階段」和「第三階段」三個區塊
    - 每個階段區塊可獨立展開/收縮
    - 使用者在新增項目時，需選擇該項目屬於哪個階段
    - 每個階段區塊顯示該階段的百分比小計和克數小計

- ❌ **FR-011**: 系統必須支援總目標克數回算：
  - 使用者輸入「總目標克數」（例如：6000g）
  - 使用者輸入每個原料的「百分比」（例如：紅豆 40%、糖 10%、水 50%）
  - 系統自動計算每個原料的「克數」（紅豆：6000 * 40% = 2400g，糖：600g，水：3000g）
  - 確保所有原料克數總和等於總目標克數

- ❌ **FR-012**: 系統必須支援乾濕重量自動換算：
  - 使用者輸入「乾豆總重」（例如：1000g）
  - 使用者輸入「濕豆總重」（例如：2500g）
  - 系統自動計算「膨脹率」，公式：濕豆總重/乾豆總重*100（例如：2500/1000*100 = 250.0000）

- ❌ **FR-013**: 系統必須支援配方項目表格展開/收縮：
  - 預設展開顯示所有項目
  - 點擊「收縮」按鈕，隱藏表格內容，僅顯示標題和「展開」按鈕
  - 點擊「展開」按鈕，重新顯示表格內容

- ❌ **FR-014**: 系統必須支援從「配方單管理」模板帶入資料：
  - 提供「從配方單管理帶入」按鈕
  - 點擊後彈出配方單管理模板選擇器（列出所有可用模板）
  - 選擇模板後，系統自動將該模板的所有原料資訊複製到配方項目表格中
  - 使用者可修改帶入的資料

- ❌ **FR-015**: 系統必須支援臨時表格功能：
  - 提供「臨時表格管理」介面，可新增、編輯、刪除子配方（例如：奶茶、椰果糖水、鋪醬配等）
  - 每個子配方包含：名稱、原料清單（名稱、百分比、克數、料號）
  - 在配方項目區塊提供「從臨時表格選擇」按鈕
  - 選擇子配方後，系統自動將該子配方的原料資訊複製到配方項目表格中
  - 臨時表格為全域共用資源，所有使用者都可以查看和使用

- ❌ **FR-016**: 系統必須自動計算總成分表：
  - 追蹤每個原料的成分組成（例如：椰果包含糖、水、其他成分）
  - 將所有原料的成分加總顯示（例如：總糖 = 直接添加的糖 + 椰果的糖 + 其他原料的糖）
  - 顯示格式：成分名稱 | 總含量（g）
  - 原料成分資訊由使用者在配方項目中手動輸入：
    - 在配方項目表格中，每個項目新增「成分組成」欄位（選填）
    - 成分組成欄位格式：成分名稱1:數值1, 成分名稱2:數值2（例如：糖:20, 水:80）
    - 系統根據所有項目的成分組成自動計算並顯示總成分表
    - 總成分表即時更新（當配方項目或成分組成變更時）

- ❌ **FR-017**: 系統必須自動計算產品規格表：
  - 根據料號加總克數（相同料號的原料克數相加）
  - 顯示格式：料號 | 原料名稱 | 總克數（g）
  - 範例：料號 S001（糖），來源包括直接添加的糖 100g、椰果內含的糖 20g，總克數 = 120g

- ❌ **FR-018**: 系統必須在配方詳情頁面的左側顯示快速資訊卡片，包含：建立日期、包裝方式、PH值、Brix糖度 — 配方詳情頁面待實作

#### 版本管理

- ❌ **FR-019**: 系統必須在配方提交時自動產生版本號，遵循以下規則： — 後端邏輯待實作
  - **版本編號格式**：v1, v2, v3, v4...（遞增數字）
  - 首次建立配方第一個版本時，版本號為 v1
  - 基於現有版本建立新版本時，版本號自動遞增（例如 v1 → v2 → v3）
  - ✅ 每個版本必須有「版本標籤」欄位，用於描述版本特色（例如：傳統版、低糖版、速煮版）
  - **版本刪除不影響編號**：刪除某個版本（例如 v1）後，其他版本（v2, v3）的編號保持不變

- ✅ **FR-020**: 系統必須提供「新增版本」功能，位於版本歷史頁面：
  - ✅ 點擊「新增版本」按鈕，開啟配方建立表單
  - ❌ 版本號自動遞增（系統自動填入下一個版本號）— 後端邏輯待實作
  - ❌ 可選擇是否基於現有版本複製資料（預設不複製，讓使用者從空白表單開始）— 功能待實作

- 🟡 **FR-021**: 系統必須提供「編輯版本」功能，位於版本歷史頁面的操作欄： — UI 已實作，後端邏輯待實作
  - ✅ 點擊「✏ 編輯」按鈕，開啟該版本的編輯表單
  - ❌ 僅能編輯當前版本的資料，無法修改版本號

- 🟡 **FR-022**: 系統必須提供「複製版本」功能（快速複製），位於版本歷史頁面的操作欄： — UI 已實作，後端邏輯待實作
  - ✅ 點擊「📋 複製」按鈕，複製該版本的所有資料
  - ❌ 建立新版本，版本號自動遞增（例如選擇 v1 複製，新版本為 v4，前提是 v3 已存在）
  - ❌ 使用者可在新版本表單中修改內容後儲存

- ❌ **FR-023**: 系統必須保留所有配方的歷史版本，支援軟刪除（標記為已刪除，但保留資料）— 後端邏輯待實作

- ✅ **FR-024**: 系統必須提供**版本歷史頁面**，顯示同一配方的所有版本（包含已刪除版本的編號空缺）：
  - ✅ 頁面標題顯示：`{配方名稱} - 版本管理`
  - ✅ 顯示版本統計：`共 {n} 個版本`
  - ✅ 提供搜尋功能：可搜尋版本名稱、研發目的
  - 🟡 提供篩選功能：依狀態、日期範圍篩選 — filter-panel 支援排序，狀態篩選待實作
  - ✅ 提供匯出功能：匯出版本清單為 Excel — UI 已實作，後端待實作
  - ✅ 表格欄位：版本號、版本名稱、建立日期、研發目的、包裝方式、PH值、糖度、操作按鈕

- ✅ **FR-025**: 系統必須在版本歷史表格中提供以下操作按鈕：
  - ✅ **👁 查看**：查看該版本的完整詳情（唯讀模式）
  - ✅ **✏ 編輯**：編輯該版本的資料
  - ✅ **📋 複製**：基於該版本建立新版本（快速複製）
  - ✅ **🗑 刪除**：軟刪除該版本（需彈出確認 Modal）

- ❌ **FR-026**: 系統必須允許使用者查看任一版本的完整資訊（配方詳情頁面），包含： — 配方詳情頁面待實作
  - 左側快速資訊卡片：建立日期、包裝方式、PH值、Brix糖度
  - 右側主要內容：研發資訊、配方項目表格、總成分表、產品規格表、穀物專用資訊、注意事項
  - 頂部操作按鈕：送樣、編輯

- ❌ **FR-027**: 系統必須確保所有下游文件（規格表/品規書/確認單）隨著版本號更新 — 下游文件功能待實作

#### 配方列表與查詢

- ✅ **FR-028**: 系統必須提供**配方列表頁面**，以表格形式顯示所有配方主檔（不是版本），包含以下欄位：
  - ✅ **全選勾選框**：批次操作用（支援全選功能）
  - ✅ **編號**：配方編號（例如：#0001, #0002），顯示為紫色漸層徽章樣式（bg-gradient-to-r from-purple-100 to-indigo-100 text-purple-800 font-mono）
  - ✅ **配方名稱**：主標題（配方名稱，font-semibold）+ 副標題（說明文字，text-xs text-gray-500）+ 主圖縮圖（選填，10x10 圓角，ring-1 ring-gray-200）
  - ✅ **配方建立者**：顯示配方建立者姓名
  - ✅ **版本數**：顯示版本總數（例如：「3 個版本」），點擊進入版本歷史頁面，使用漸層背景（from-blue-50 to-indigo-50）搭配標籤圖標
  - ✅ **最新版本**：最新版本的版本號徽章（例如：v1, v2, v3）
  - ✅ **最後更新**：配方最後更新日期（YYYY-MM-DD 格式）
  - ✅ **操作**：圖示按鈕（檢視、編輯、刪除），每個圖示使用語意化顏色（藍色、橘色、紅色）

- 🟡 **FR-029**: 系統必須在配方列表頂部提供以下操作功能：
  - ✅ **搜尋欄位**：搜尋配方名稱（關鍵字搜尋，支援模糊比對）
  - ❌ **篩選按鈕**：開啟篩選面板，支援按配方建立者、狀態、日期範圍篩選 — filter-panel 元件已有，但未傳入配方建立者、狀態、日期篩選參數
  - ✅ **排序按鈕**：切換排序方式（4 種基本排序已實作）
  - ✅ **顯示筆數**：顯示當前頁面範圍（例如：顯示 01-10 筆）
  - ✅ **新增配方按鈕**：開啟新增配方表單

- ✅ **FR-030**: 系統必須在配方列表的操作欄提供以下圖示按鈕：
  - ✅ **👁 檢視**（藍色到青色漸層）：查看配方詳情，使用眼睛圖標（Heroicons: eye），基礎背景（from-blue-50 to-cyan-50 text-blue-600），hover 時轉為實色漸層（hover:from-blue-500 hover:to-cyan-500 hover:text-white），陰影加深（hover:shadow-lg）和放大（hover:scale-110）
  - ✅ **✏ 編輯**（橘色到琥珀色漸層）：編輯配方主檔資訊，使用鉛筆圖標（Heroicons: pencil），基礎背景（from-orange-50 to-amber-50 text-orange-600），hover 時轉為實色漸層（hover:from-orange-500 hover:to-amber-500 hover:text-white），陰影加深（hover:shadow-lg）和放大（hover:scale-110）
  - ✅ **🗑 刪除**（紅色到粉色漸層）：刪除該配方（需彈出確認 Modal），使用垃圾桶圖標（Heroicons: trash），基礎背景（from-red-50 to-pink-50 text-red-600），hover 時轉為實色漸層（hover:from-red-500 hover:to-pink-500 hover:text-white），陰影加深（hover:shadow-lg）和放大（hover:scale-110）
  - ✅ 所有圖示按鈕尺寸統一為 9x9（w-9 h-9），圖標本身為 4.5x4.5（w-4.5 h-4.5），圓角 rounded-xl，過渡動畫 transition-all duration-300
  - ✅ 註：版本歷史可透過點擊「版本數」欄位進入，不需要獨立的版本操作按鈕

- 🟡 **FR-031**: 系統必須支援配方列表的排序功能，可依建立日期（升序/降序）、版本號、狀態排序 — 建立日期和名稱排序已實作，版本號和狀態排序待實作

- 🟡 **FR-032**: 系統必須在配方列表採用分頁顯示，每頁顯示 10-20 筆資料，提供頁碼導航 — 筆數顯示已實作，頁碼導航待實作

- ✅ **FR-033**: 系統必須為**配方列表表格**（recipe-list-table）提供以下視覺設計特性：
  - **表格標題列**：漸層背景（bg-gradient-to-r from-indigo-50/50 via-purple-50/30 to-pink-50/20）
  - **表格列 Hover 效果**：漸層效果（hover:bg-gradient-to-r hover:from-indigo-50/40 hover:to-purple-50/30），過渡動畫 transition-all duration-200，hover 時陰影（hover:shadow-sm）
  - **列間分隔線**：使用柔和的 divide-gray-100（而非 gray-200）
  - **編號欄位**：紫色漸層徽章樣式（inline-flex items-center px-3 py-1 rounded-lg bg-gradient-to-r from-purple-100 to-indigo-100 text-purple-800 font-mono text-xs font-bold shadow-sm ring-1 ring-purple-200/50），群組 hover 時陰影加深（group-hover:shadow-md transition-all duration-200）
  - **配方名稱**：主標題使用 font-semibold text-gray-900，說明文字使用 text-xs text-gray-500，圖片加入細框 ring-1 ring-gray-200
  - **版本數欄位**：漸層背景（bg-gradient-to-br from-blue-50 to-indigo-50），hover 時加深（hover:from-blue-100 hover:to-indigo-100），包含藍色標籤圖標（w-4 h-4 text-blue-600）和文字（text-blue-700 font-semibold text-xs），過渡動畫 transition-all duration-200，陰影效果（shadow-sm hover:shadow-md），環形邊框（ring-1 ring-blue-100 hover:ring-blue-200）
  - **操作圖示**：9x9 圓角按鈕（w-9 h-9 rounded-xl），圖標 4.5x4.5，漸層背景（from-{color}-50 to-{color}-50），hover 時轉為漸層色（hover:from-{color}-500 hover:to-{color}-500 hover:text-white），hover 時陰影加深（hover:shadow-lg）和放大（hover:scale-110），過渡動畫 transition-all duration-300
  - **對齊方式**：編號、配方建立者、版本數、最新版本、最後更新、操作欄位均為置中對齊（text-center），配方名稱為靠左對齊（text-left）
  - **勾選框**：置中對齊（text-center align-middle），使用 Tailwind 預設樣式（rounded border-gray-300 text-indigo-600 focus:ring-indigo-600 size-4）

#### 介面與互動

- ✅ **FR-042**: 系統必須提供響應式介面，支援以下裝置： — 所有頁面已實作響應式設計
  - ✅ **桌面**：1920x1080 以上
  - ✅ **平板**：768x1024 以上
  - ✅ **手機**：375x667 以上（iPhone SE）到 430x932（iPhone 14 Pro Max）
  - ✅ 手機版採用卡片式佈局，簡化資訊顯示

- 🟡 **FR-034**: 系統必須在使用者執行關鍵操作時提供確認提示，包含： — 元件已支援，實際邏輯待實作
  - ❌ 儲存配方：「確定要儲存此配方嗎？」
  - 🟡 刪除版本：「確定要刪除此版本嗎？刪除後版本號不會重新分配。」— UI 提示已實作

- ✅ **FR-035**: 系統必須在操作成功/失敗時提供明確的視覺回饋： — Alert 元件已完整實作
  - ✅ 成功：綠色漸層訊息框（from-green-50 to-emerald-50），左側綠色邊框，圖標在圓角背景中，從右側滑入動畫，顯示 3 秒後自動消失
  - ✅ 失敗：紅色漸層訊息框（from-red-50 to-pink-50），左側紅色邊框，圖標在圓角背景中，需使用者手動關閉
  - ✅ 警告：黃色漸層訊息框（from-yellow-50 to-orange-50），左側黃色邊框
  - ✅ 資訊：藍色漸層訊息框（from-blue-50 to-indigo-50），左側藍色邊框

- ✅ **FR-036**: 系統必須提供麵包屑導航，顯示使用者目前位置（例如：研發模組 > 配方單管理），包含首頁圖標

- 🟡 **FR-037**: 系統必須支援鍵盤導航（Tab 鍵切換欄位，Enter 鍵提交表單）— 基本 Tab 導航已支援，Enter 提交待驗證

- 🟡 **FR-038**: 系統必須符合 WCAG 2.1 AA 無障礙標準，包含： — 部分實作
  - ✅ 所有表單欄位有明確的 label
  - ✅ 顏色對比度符合標準（至少 4.5:1）
  - 🟡 錯誤訊息可被螢幕閱讀器讀取 — 待驗證

- ❌ **FR-039**: 系統必須提供草稿儲存功能，使用者可暫存未完成的配方（儲存在瀏覽器本地或伺服器）

- ❌ **FR-040**: 系統必須在使用者離開未儲存的表單頁面時，彈出警告提示：「您有未儲存的變更，確定要離開嗎？」

- ✅ **FR-041**: 系統必須提供「返回頂部」按鈕（scroll-to-top），具備以下特性：
  - ✅ 固定在頁面右下角（bottom-8 right-8）
  - ✅ 當使用者滾動超過 300px 時自動淡入顯示
  - ✅ 圓形按鈕（14x14），紫色漸層背景（from-indigo-600 to-purple-600）
  - ✅ Hover 時放大 10%、陰影加深、箭頭向上移動
  - ✅ 點擊後平滑滾動回頁面頂部
  - ✅ Hover 時顯示「返回頂部」提示文字

#### 視覺設計系統

- **FR-042**: 系統必須採用一致的現代化設計語言，包含：
  - **顏色系統**：以 Indigo（藍紫）為主色，輔以 Purple（紫）、Green（綠）、Red（紅）、Blue（藍）、Amber（琥珀）、Emerald（翠綠）等色彩
  - **漸層使用**：主要元件使用漸層背景提升視覺層次
  - **圓角規範**：卡片使用 rounded-xl（12px），按鈕和輸入框使用 rounded-lg（8px）
  - **陰影系統**：卡片使用 shadow-md，hover 時升級為 shadow-lg
  - **間距系統**：區塊間距使用 space-y-8，內部間距使用 px-6 py-6

- **FR-043**: 系統必須在 Page Header 區域提供以下設計特性：
  - 漸層背景（from-white via-indigo-50/30 to-purple-50/30）
  - 左側顯示大型漸層圖標（12x12，from-indigo-500 to-purple-600）
  - 標題字體大小為 text-4xl，bold，tracking-tight
  - 麵包屑導航包含首頁圖標和箭頭分隔符
  - 右側操作按鈕使用漸層背景和陰影效果

- **FR-044**: 系統必須為每個表單區塊提供以下視覺特性：
  - 白色卡片背景（bg-white），rounded-xl 圓角
  - 左側 4px 彩色邊框（border-l-4），每個區塊使用不同顏色：
    - 配方主檔資訊：Indigo（border-indigo-500）
    - 版本資訊：Purple（border-purple-500）
    - 測量數據：Blue（border-blue-500）
    - 配方項目：Rose（border-rose-500），附加「必填」徽章
    - 穀物專用資訊：Amber（border-amber-500）
    - 照片與備註：Emerald（border-emerald-500）
  - 標題區域包含漸層圖標（10x10）和標題文字
  - 標題區域淡色漸層背景（例如：from-indigo-50/50 to-transparent）
  - Hover 時陰影加深（shadow-md → shadow-lg）
  - 過渡動畫（transition-shadow duration-200）

- **FR-045**: 系統必須為所有表單輸入欄位提供以下互動特性：
  - 圓角：rounded-lg（8px）
  - 邊框：ring-1 ring-inset ring-gray-300
  - Padding：px-3 py-2.5
  - Focus 狀態：ring-2 ring-indigo-500，陰影加深（shadow-md）
  - 過渡動畫：transition-all duration-200
  - Placeholder 顏色：text-gray-400
  - 文字大小：text-sm

- **FR-046**: 系統必須為按鈕提供以下設計特性：
  - **Primary 按鈕**：紫色漸層（from-indigo-600 to-indigo-700），hover 時加深（from-indigo-700 to-indigo-800），shadow-md
  - **Secondary 按鈕**：白色背景，灰色邊框（ring-1 ring-gray-300），hover 時背景變灰（bg-gray-50）
  - **Danger 按鈕**：紅色漸層（from-red-600 to-red-700），hover 時加深
  - 點擊時縮小 5%（active:scale-95）
  - Focus 時顯示 ring-2 光圈
  - 過渡動畫：transition-all duration-200

- **FR-047**: 系統必須為配方項目表格（item-table）提供以下視覺特性：
  - 斑馬紋效果：偶數行白色，奇數行淡灰（bg-gray-50/50）
  - Hover 效果：淡紫色背景（hover:bg-indigo-50/50），過渡動畫
  - 行號顯示：紫色圓形徽章（bg-indigo-100 text-indigo-700）
  - 表頭漸層背景（from-gray-50 to-gray-100/50）
  - 刪除按鈕：紅色文字，hover 時顯示淡紅背景（hover:bg-red-50）
  - 邊框：rounded-lg，border border-gray-200
  - 支援展開/收縮按鈕

- **FR-048**: 系統必須為圖片上傳區域提供以下動畫和視覺效果：
  - 虛線邊框（border-2 border-dashed border-gray-300）
  - 漸層背景（from-gray-50 to-indigo-50/20）
  - Hover 時邊框變紫色（hover:border-indigo-400），背景加深
  - 圖標浮動動畫：上下浮動 10px，3 秒循環，hover 時加速至 2 秒
  - 中央漸層圖標按鈕（from-indigo-500 to-purple-600）
  - 點狀裝飾背景圖案（opacity-5）
  - 圓角：rounded-xl
  - 預覽圖片包含紫色光暈效果（漸層 blur 背景）
  - Hover 時預覽圖片放大 5%（scale-105）
  - 每張照片顯示照片名稱

#### 架構與設計原則

- **FR-049**: 系統必須採用元件化設計架構，將可重複使用的 UI 元素抽取為獨立的 Blade 元件，提升程式碼重用性和可維護性

- **FR-050**: 系統必須遵循 Laravel Blade 元件最佳實踐，所有元件支援參數化配置，使用 `@props` 定義可接受的參數

### Key Entities

系統採用二層式資料結構：**配方主檔 (Recipe) → 版本 (Version)**

- **配方主檔 (Recipe)**: 代表產品配方的基本識別資訊，包含以下屬性：
  - **配方 ID**（自動產生，主鍵）
  - **配方編號**（顯示用編號，格式：#0001, #0002...）
  - **配方名稱**（例如：紅豆湯、糙米粥）
  - **客戶名稱**（選填，記錄客戶或專案名稱）
  - **配方說明**（選填，說明配方用途）
  - **配方主圖 URL**（選填，主要照片）
  - **配方建立者 ID**（關聯到配方建立者實體）
  - **建立人**（關聯到使用者）
  - **建立時間**（配方主檔建立時間）
  - **最新版本**（關聯到最新的版本 ID，用於快速查詢）
  - **版本列表**（關聯到多個版本實體）

- **配方建立者 (Recipe Creator)**: 代表可以被指定為配方建立者的人員，包含以下屬性：
  - **配方建立者 ID**（自動產生，主鍵）
  - **姓名**（例如：張三、李四）
  - **部門**（選填，例如：研發部、生產部）
  - **狀態**（啟用/停用）
  - **建立時間**
  - **更新時間**

- **版本 (Version)**: 代表配方的特定版本，包含完整配方內容，包含以下屬性：
  - **版本 ID**（自動產生，主鍵）
  - **配方 ID**（關聯到配方主檔）
  - **版本名稱**（格式：v1, v2, v3...，不因刪除而重新編號）
  - **版本標籤**（例如：傳統版、低糖版、速煮版）
  - **建立日期**（此版本建立日期）
  - **研發目的**（說明此版本的研發目的）
  - **條件說明**（記錄殺菌條件、客戶需求等）
  - **測量數據**：
    - PH 值（數值，範圍 0-14，小數點後 4 位）
    - Brix 糖度（數值，單位：°Bx，小數點後 4 位）
    - 包裝方式（文字，格式：產出:(紅豆湯 1 杯，綠豆湯 1 袋)）
  - **配方項目清單**（關聯到多個項目實體）
  - **總目標克數**（數值，用於回算各原料克數）
  - **穀物專用資訊**（選填）：
    - 泡豆方式（文字，純文字說明）
    - 洗豆水量（數值，單位：ml，小數點後 4 位）
    - 每包投料量（數值，單位：g，小數點後 4 位）
    - 乾豆總重（數值，單位：g，小數點後 4 位）
    - 濕豆總重（數值，單位：g，小數點後 4 位）
    - 膨脹率（數值，自動計算，小數點後 4 位，公式：濕豆總重/乾豆總重*100）
  - **照片 URLs**（選填，支援多張照片，每張照片包含名稱）
  - **注意事項**（選填，多行文字）
  - **狀態**（草稿/已發布/已歸檔/已刪除）
  - **建立人**（關聯到使用者）
  - **建立時間**（版本建立時間）
  - **更新時間**（版本最後更新時間）

- **項目 (Item)**: 代表配方版本中的單一項目，包含以下屬性：
  - **項目 ID**（自動產生，主鍵）
  - **版本 ID**（關聯到版本）
  - **項目名稱**（例如：紅豆、糖、水）
  - **百分比**（數值，支援小數點後 10 位，單位：%）
  - **克數**（數值，支援小數點後 10 位，單位：g，可由總目標克數和百分比自動計算）
  - **料號**（文字，用於產品規格表加總）
  - **投料階段**（文字，選項：一段式兩階投料、二段式三階投料）
  - **階段編號**（數值，1/2/3，用於分組顯示，例如：第一階段、第二階段、第三階段）
  - **成分組成**（選填，文字格式：成分名稱1:數值1, 成分名稱2:數值2，例如：糖:20, 水:80，用於總成分表計算）
  - **順序**（在項目清單中的排序）

- **臨時表格 (Temporary Template)**: 代表子配方的原料組成，可重複使用，包含以下屬性：
  - **臨時表格 ID**（自動產生，主鍵）
  - **名稱**（例如：奶茶、椰果糖水、鋪醬配）
  - **建立人**（關聯到使用者）
  - **建立時間**
  - **項目清單**（關聯到多個臨時表格項目實體）
  - **狀態**（啟用/停用）

- **臨時表格項目 (Temporary Template Item)**: 代表臨時表格中的單一項目，包含以下屬性：
  - **項目 ID**（自動產生，主鍵）
  - **臨時表格 ID**（關聯到臨時表格）
  - **項目名稱**（例如：紅茶、牛奶、糖）
  - **百分比**（數值，支援小數點後 10 位）
  - **克數**（數值，支援小數點後 10 位）
  - **料號**（文字）
  - **順序**

- **使用者 (User)**: 系統使用者，包含以下屬性：
  - 使用者 ID
  - 姓名
  - 角色（研發人員/系統管理員）
  - 電子郵件（用於通知）

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 研發人員能在 3 分鐘內完成新配方的建立和提交（包含填寫所有必填欄位和上傳照片）
- **SC-002**: 使用「編製新版本」功能建立配方，比從頭建立節省 60% 以上的時間
- **SC-003**: 使用「快速複製」功能複製現有版本，比手動輸入節省 80% 以上的時間
- **SC-004**: 使用者能在 10 秒內透過篩選功能找到目標配方（在 100+ 配方的資料庫中）
- **SC-005**: 介面在桌面、平板、手機裝置上的可用性測試通過率達 90% 以上
- **SC-006**: 配方列表頁面載入時間低於 2 秒（包含 100 筆配方資料）
- **SC-007**: 配方詳情頁面載入時間低於 1.5 秒（包含照片和總成分表）
- **SC-008**: 手機版配方列表頁面載入時間低於 3 秒（包含 20 筆配方資料）
- **SC-009**: 使用者首次使用系統完成配方建立的成功率達 85% 以上（無需額外培訓或說明文件）
- **SC-010**: 系統能正確保留和顯示至少 10 個歷史版本的配方，無資料遺失或錯誤
- **SC-011**: 配方篩選結果的準確率達 100%（符合所選條件，無漏失或誤判）
- **SC-012**: 所有關鍵操作（儲存、刪除）的使用者錯誤率低於 5%
- **SC-013**: 照片上傳成功率達 95% 以上（在正常網路環境下，包含手機拍照）
- **SC-014**: 手機拍照上傳功能在 iOS 和 Android 裝置上的成功率達 90% 以上
- **SC-015**: 表單欄位驗證即時回饋時間低於 300ms（使用者輸入後立即顯示錯誤提示）
- **SC-016**: 配方建立者下拉選單載入時間低於 500ms
- **SC-017**: 總成分表和產品規格表計算準確率達 100%
- **SC-018**: 使用「從配方單管理帶入」或「從臨時表格選擇」功能，比手動輸入節省 70% 以上的時間
- **SC-019**: 配方項目表格展開/收縮動畫流暢度達 60fps

## Assumptions *(documentation)*

### UI/UX 假設

- 假設使用者使用桌面、平板、手機裝置，需要針對三種裝置尺寸優化介面
- 假設手機版採用簡化的卡片式佈局，隱藏次要資訊
- 假設配方表單採用單頁表單設計，所有欄位在同一頁面顯示，不使用多步驟精靈
- 假設原料清單使用動態表格形式，每行一個原料，支援即時新增/刪除行
- 假設照片上傳採用彈出選擇視窗，提供「開啟相機」和「開啟相簿」兩個選項
- 假設系統提供即時驗證（邊輸入邊驗證），而非僅在提交時驗證
- 假設版本號顯示格式統一為「v + 數字」（例如 v1, v2, v3）
- 假設配方列表頁面顯示配方主檔，點擊後進入版本歷史頁面查看所有版本
- 假設配方項目表格支援展開/收縮，預設展開

### 業務邏輯假設

- 假設同一配方可以有多個版本同時存在，每個版本有獨立的狀態
- 假設版本一旦建立後可以編輯，直到狀態變更為「已發布」或「已歸檔」
- 假設配方歷史版本永久保留（軟刪除），無自動刪除機制
- 假設通知機制採用站內通知（彈出訊息或通知列表），不包含電子郵件或簡訊
- 假設「來源配方編號」欄位選擇後，系統自動填入資訊但允許使用者修改
- 假設版本號達到 v999 時，系統提示使用者聯絡管理員處理
- 假設刪除版本不會重新分配版本號（例如刪除 v1 後，v2 仍保持為 v2）
- 假設配方建立者預設為當前登入使用者，可透過下拉選單修改
- 假設配方建立者管理由系統管理員負責，研發人員僅能選擇
- 假設臨時表格為全域共用資源，所有使用者都可以使用
- 假設使用臨時表格的配方，不受子配方修改/刪除的影響（複製時即為獨立資料）
- 假設總成分表的原料成分資訊需要從原料主檔取得（需要原料主檔管理功能）
- 假設產品規格表根據料號自動加總，料號由使用者在配方項目中輸入

### 欄位邏輯假設

- 假設「配方主檔資訊」（配方名稱、客戶名稱、配方說明、配方主圖、配方建立者）在首次建立時填寫，後續建立新版本時可修改配方建立者
- 假設「版本資訊」（版本名稱、版本標籤、建立日期、研發目的、條件說明）每個版本獨立填寫
- 假設「PH 值」欄位為數字輸入，範圍 0-14，支援小數點後 4 位（例如：6.5000）
- 假設「Brix 糖度」欄位為數字輸入，單位為 °Bx，支援小數點後 4 位（例如：15.2000）
- 假設「包裝方式」欄位為文字輸入，格式範例：產出:(紅豆湯 1 杯，綠豆湯 1 袋)
- 假設「泡豆方式」為純文字輸入，可輸入任意說明（例如：「冷藏浸泡 8 小時」）
- 假設「洗豆水量」、「每包投料量」、「乾豆總重」、「濕豆總重」為純數字輸入，支援小數點後 4 位，單位在欄位標籤中說明
- 假設「膨脹率」為自動計算欄位，公式為 濕豆總重/乾豆總重*100（例如：2500/1000*100 = 250.0000）
- 假設「項目清單」中的「百分比」和「克數」支援小數點後 10 位（例如 25.5000000000%, 150.2500000000g）
- 假設「總目標克數」為數字輸入，系統根據此值和百分比自動回算各原料克數
- 假設「日期」欄位預設為今日，但允許使用者選擇其他日期（不限制未來或過去日期）
- 假設「條件說明」為單一多行文字輸入欄位，取代原本的「殼種名稱」和「客戶需求」兩個子欄位
- 假設「研發目的」和「注意事項」為多行文字輸入，支援換行
- 假設「項目清單」的百分比總和建議為 100%，但不強制（系統僅顯示黃色警告提示）
- 假設所有數值欄位（PH、Brix、項目百分比、克數、穀物資訊）都是選填，非必填
- 假設照片名稱預設為原始檔名，可修改
- 假設照片最多上傳數量無限制，但每張最大 5MB

### 技術假設

- 假設系統支援現代瀏覽器（Chrome, Firefox, Safari, Edge 最新兩個版本）
- 假設圖片上傳限制為單張 5MB，格式支援 JPG/PNG
- 假設手機相機/相簿存取使用 HTML5 `<input type="file" accept="image/*" capture="environment">` 屬性
- 假設配方列表採用分頁顯示，每頁顯示 20 筆資料（桌面版）或 10 筆資料（手機版）
- 假設篩選功能採用前端即時過濾（資料量小於 1000 筆時）或後端 API 查詢（資料量大於 1000 筆時）
- 假設草稿儲存功能使用瀏覽器 localStorage（容量限制 5MB）或伺服器端儲存
- 假設配方項目表格展開/收縮使用 CSS transition 動畫
- 假設總成分表和產品規格表為前端計算（即時更新）或後端計算（儲存時計算）

### 權限假設

- 假設研發人員可以建立、編輯、刪除配方，查看所有配方
- 假設系統管理員可以管理配方建立者名單
- 假設系統使用既有的身分驗證機制，不需要額外的登入系統
- 假設使用者角色（研發人員/系統管理員）在登入時已確定，無需在介面中切換
