---
name: refactor
description: 重構/優化流程。當用戶提到「重構」「優化」「調整」「改善」「瘦身」「拆分」「效能」等關鍵字時自動使用。
---

# 重構/優化流程

## 觸發條件

當用戶提問包含以下關鍵字時自動啟用：
- 「重構」「優化」「調整」「改善」「瘦身」「拆分」「效能」

## 執行流程

```
1. Sequential Thinking - 分析重構策略
2. /impact-analysis - 評估影響範圍
3. /tdd - 撰寫回歸測試（確保功能不變）
4. coder agent - 執行重構（保持測試通過）
5. reviewer agent - 審查
```

## 步驟說明

### 1. 分析

- 現狀問題：目前程式碼有什麼問題？
- 重構目標：重構後要達成什麼？
- 風險評估：可能影響哪些功能？

### 2. 重構原則

- 小步前進：每次只做一個小改動
- 持續驗證：每個改動後都執行測試
- 不改行為：只改結構，不改功能

## 品質要求

- **NEVER** 不寫測試就重構
- **ALWAYS** 確保所有測試通過
